{% extends 'base.html' %} {% block content %}
<div class="container mt-4">
  <h2 class="text-light">Вход в систему</h2>

  <form method="post">
    {% csrf_token %}
    <div class="mb-3">
      <label for="id_username" class="form-label">Имя пользователя</label>
      <input
        type="text"
        class="form-control bg-secondary text-light"
        id="id_username"
        name="username"
        placeholder="Имя пользователя"
        value="{{ form.username.value|default_if_none:'' }}"
        required
      />
      {% if form.username.errors %}
      <div class="alert alert-danger text-light bg-secondary mt-2">
        {{ form.username.errors.0 }}
      </div>
      {% endif %}
    </div>
    <div class="mb-3">
      <label for="id_password" class="form-label">Пароль</label>
      <input
        type="password"
        class="form-control bg-secondary text-light"
        id="id_password"
        name="password"
        placeholder="Пароль"
        required
      />
      <div class="form-check mt-2">
        <input class="form-check-input" type="checkbox" id="showPassword" />
        <label class="form-check-label text-light" for="showPassword">
          Показывать пароль
        </label>
      </div>
      {% if form.password.errors %}
      <div class="alert alert-danger text-light bg-secondary mt-2">
        {{ form.password.errors.0 }}
      </div>
      {% endif %} {% if form.non_field_errors %}
      <div class="alert alert-danger text-light bg-secondary mt-2">
        {{ form.non_field_errors.0 }}
      </div>
      {% endif %}
    </div>
    <button type="submit" class="btn btn-warning w-100">Войти</button>
  </form>
  <p class="text-center mt-3 text-light">
    Нет аккаунта?
    <a href="{% url 'user_create' %}" class="text-warning">Зарегистрируйтесь</a>
  </p>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const showPassword = document.getElementById("showPassword");
    const passwordField = document.getElementById("id_password");
    if (showPassword && passwordField) {
      showPassword.addEventListener("click", function () {
        const currentValue = passwordField.value;
        passwordField.type = this.checked ? "text" : "password";
        passwordField.value = currentValue;
      });
    }
  });
</script>
{% endblock %}
